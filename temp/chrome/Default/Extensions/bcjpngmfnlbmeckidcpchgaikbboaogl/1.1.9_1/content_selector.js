(()=>{"use strict";var t={357:t=>{function e(t,e){if(null!=t)return t;var n=new Error(void 0!==e?e:"Got unexpected "+t);throw n.framesToPop=1,n}t.exports=e,t.exports.default=e,Object.defineProperty(t.exports,"__esModule",{value:!0})}},e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}(()=>{function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=function(){function e(n){t(this,e),s(this,"selectors",void 0),this.selectors=n}return i(e,[{key:"find",value:function(t){for(var e=0;e<this.selectors.length;e++){var n=this.selectors[e].match(t);if("Trying #".concat(e,"..."),null!=n)return n}return null}}]),e}(),r=function(){function e(n,i,o){var r=this;t(this,e),s(this,"document",void 0),s(this,"selectorFinder",void 0),s(this,"sender",void 0),s(this,"capturer",null),this.document=n,this.selectorFinder=i,this.sender=o,"document.readyState = ".concat(n.readyState),"interactive"!==n.readyState&&"complete"!==n.readyState?n.addEventListener("DOMContentLoaded",(function(){r.bindCapturer()})):this.bindCapturer()}return i(e,[{key:"bindCapturer",value:function(){if(null==this.capturer){var t=this.document.location;this.capturer=this.selectorFinder.find(t),null!=this.capturer&&this.capturer.bind(this.document,this.sender)}}}]),e}(),a=function(){function e(n){t(this,e),s(this,"runtime",void 0),this.runtime=n}return i(e,[{key:"sendMessage",value:function(t){this.runtime.sendMessage(t)}}]),e}(),u=n(357),c=function(){function e(){t(this,e),s(this,"protocol","http:"),s(this,"host","localhost:8123"),s(this,"pathname","/capturing.html"),s(this,"signature","[".concat(this.protocol,"][").concat(this.host,"][").concat(this.pathname,"]"))}return i(e,[{key:"match",value:function(t){return this.signature,t.protocol===this.protocol&&t.host===this.host&&t.pathname===this.pathname?new l(this.signature):null}}]),e}(),l=function(){function e(n){t(this,e),s(this,"pageType","internal"),s(this,"document",void 0),s(this,"sender",void 0),s(this,"passwordField",null),s(this,"signature",void 0),this.signature=n}return i(e,[{key:"bind",value:function(t,e){var n=this;this.document=t,this.sender=e;var i=t.getElementById("submit_button");if(null==i)return"The submit button is not found on ".concat(this.signature),!1;var s=t.getElementById("password_field");return null==s?("The password field is not found on ".concat(this.signature),!1):s instanceof HTMLInputElement?(this.passwordField=s,i.addEventListener("click",(function(t){n.submitListener(t)}),!0),!0):("The password field is not HTMLInputElement, it's ".concat(s.toString()," on ").concat(this.signature),!1)}},{key:"submitListener",value:function(t){var e={type:"password_captured",data:{captured:u(this.passwordField,"passwordField is null in TestPageCapturer::submitListener").value,pageType:this.pageType,URL:this.document.URL}};this.sender.sendMessage(e),"The password captured sent from ".concat(this.signature)}}]),e}(),h=function(){function e(n){t(this,e),s(this,"pageType","external"),s(this,"document",void 0),s(this,"sender",void 0),s(this,"signature",void 0),s(this,"markAttributeName","pp_mark"),s(this,"markAttributeValue","m"),s(this,"loginButtonSelectorFirst","button[data-testid=royal_login_button]"),s(this,"passwordFieldSelectorFirst","input[data-testid=royal_pass]"),s(this,"loginButtonSelectorSecond","".concat(this.loginButtonSelectorFirst,":not([").concat(this.markAttributeName,"=").concat(this.markAttributeValue,"])")),s(this,"passwordFieldSelectorSecond","".concat(this.passwordFieldSelectorFirst,":not([").concat(this.markAttributeName,"=").concat(this.markAttributeValue,"])")),s(this,"loginButton",null),s(this,"passwordField",null),this.signature=n}return i(e,[{key:"bind",value:function(t,e){var n=this;return this.document=t,this.sender=e,!(!this.markBySelector(this.loginButtonSelectorFirst)||!this.markBySelector(this.passwordFieldSelectorFirst)||(this.document.addEventListener("keydown",(function(t){n.keyPressListener(t)}),!0),0))}},{key:"markBySelector",value:function(t){"Trying to mark by ".concat(t," on ").concat(this.signature);var e=this.document.querySelector(t);return null==e?("Marking by selector ".concat(t," has failed! Element was not found"),!1):(e.setAttribute(this.markAttributeName,this.markAttributeValue),!0)}},{key:"keyPressListener",value:function(t){"keyPressListener: ".concat(t.key),this.findLoginButton(),this.findPasswordField(),"Enter"===t.key&&this.capture()}},{key:"findLoginButton",value:function(){var t=this;if(null==this.loginButton){var e=this.document.querySelector(this.loginButtonSelectorSecond);null!=e&&(e instanceof HTMLButtonElement?(this.loginButton=e,this.loginButton.addEventListener("click",(function(e){t.clickListener(e)}),!0)):"The second login button is not HTMLInputElement, it's ".concat(e.toString()," on ").concat(this.signature))}}},{key:"findPasswordField",value:function(){if(null==this.passwordField){var t=this.document.querySelector(this.passwordFieldSelectorSecond);null!=t&&(t instanceof HTMLInputElement?this.passwordField=t:"The second password field is not HTMLInputElement, it's ".concat(t.toString()," on ").concat(this.signature))}}},{key:"clickListener",value:function(t){this.capture()}},{key:"capture",value:function(){if(null==this.passwordField)"The second password field is not found on ".concat(this.signature);else if(""!==this.passwordField.value){var t={type:"password_captured",data:{captured:this.passwordField.value,pageType:this.pageType,URL:this.document.URL}};this.sender.sendMessage(t),"The password captured sent from ".concat(this.signature)}}}]),e}(),d=function(){function e(){t(this,e),s(this,"protocol","https:"),s(this,"host","www.facebook.com"),s(this,"signature","[".concat(this.protocol,"][").concat(this.host,"]"))}return i(e,[{key:"match",value:function(t){return this.signature,t.protocol===this.protocol&&t.host===this.host?new p(this.signature):null}}]),e}(),p=function(){function e(n){t(this,e),s(this,"pageType","external"),s(this,"sender",void 0),s(this,"passwordField",null),s(this,"signature",void 0),s(this,"document",void 0),s(this,"recentLoginsCapturer",null),s(this,"recentLoginsButtonSelector","button[data-testid=royal_login_button]"),s(this,"loginButtonSelectors",["#loginbutton",this.recentLoginsButtonSelector,"input[data-testid=royal_login_button]",'div[aria-label="Accessible login button"]']),s(this,"passwordFieldsSelectors",["#pass",'input[name="pass"]',"input[type=password]","input[data-testid=royal_pass]"]),this.signature=n}return i(e,[{key:"bind",value:function(t,e){var n=this;this.document=t,this.sender=e;for(var i=null,s="",o=0;o<this.loginButtonSelectors.length&&null==i;o++)"trying ".concat(this.loginButtonSelectors[o]),s=this.loginButtonSelectors[o],i=t.querySelector(s);if(null==i)return"The submit button is not found on ".concat(this.signature),!1;s===this.recentLoginsButtonSelector&&(this.recentLoginsCapturer=new h(this.signature),this.recentLoginsCapturer.bind(t,e));for(var r=null,a=0;a<this.passwordFieldsSelectors.length&&null==r;a++)"trying ".concat(this.passwordFieldsSelectors[a]),r=t.querySelector(this.passwordFieldsSelectors[a]);return null==r?("The password field is not found on ".concat(this.signature),!1):r instanceof HTMLInputElement?(this.passwordField=r,i.addEventListener("click",(function(t){n.clickListener(t)}),!0),t.addEventListener("keydown",(function(t){n.keyPressListener(t)}),!0),!0):("The password field is not HTMLInputElement, it's ".concat(r.toString()," on ").concat(this.signature),!1)}},{key:"clickListener",value:function(t){this.capture()}},{key:"keyPressListener",value:function(t){"keyPressListener: ".concat(t.key),"Enter"===t.key&&this.capture()}},{key:"capture",value:function(){var t=u(this.passwordField,"passwordField is null in FacebookLoginCapturer::submitListener");if(""!==t.value){var e={type:"password_captured",data:{captured:t.value,pageType:this.pageType,URL:this.document.URL}};this.sender.sendMessage(e),"The password captured sent from ".concat(this.signature)}}}]),e}(),f=function(){function e(){t(this,e),s(this,"protocol","https:"),s(this,"host","www.internalfb.com"),s(this,"pathname","/login"),s(this,"signature","[".concat(this.protocol,"][").concat(this.host,"][").concat(this.pathname,"]"))}return i(e,[{key:"match",value:function(t){return this.signature,t.protocol===this.protocol&&t.host===this.host&&t.pathname.startsWith(this.pathname)?new g(this.signature):null}}]),e}(),g=function(){function e(n){t(this,e),s(this,"pageType","internal"),s(this,"document",void 0),s(this,"sender",void 0),s(this,"signature",void 0),s(this,"loginButtonId","login_button_next"),s(this,"passwordFieldSelector","input[type=password]"),s(this,"buttonNext",null),s(this,"passwordField",null),this.signature=n}return i(e,[{key:"bind",value:function(t,e){var n=this;return this.document=t,this.sender=e,this.document.addEventListener("keydown",(function(t){n.keyPressListener(t)}),!0),!0}},{key:"keyPressListener",value:function(t){"keyPressListener: ".concat(t.key),this.findButtonNext(),this.findPasswordField(),"Enter"===t.key&&this.capture()}},{key:"findButtonNext",value:function(){var t=this;null==this.buttonNext&&(this.buttonNext=u(this.document.getElementById(this.loginButtonId),'The "Next" button is not found on '.concat(this.signature)),this.buttonNext.addEventListener("click",(function(e){t.clickListener(e)}),!0))}},{key:"findPasswordField",value:function(){if(null==this.passwordField){var t=this.document.querySelector(this.passwordFieldSelector);null!=t&&(t instanceof HTMLInputElement?this.passwordField=t:"The password field is not HTMLInputElement, it's ".concat(t.toString()," on ").concat(this.signature))}}},{key:"clickListener",value:function(t){this.findPasswordField(),this.capture()}},{key:"capture",value:function(){if(null==this.passwordField)"The password field is not found on ".concat(this.signature);else{var t={type:"password_captured",data:{captured:this.passwordField.value,pageType:this.pageType,URL:this.document.URL}};this.sender.sendMessage(t),"The password captured sent from ".concat(this.signature)}}}]),e}(),y=function(){function e(){t(this,e),s(this,"protocol","https:"),s(this,"host","www.internalfb.com"),s(this,"pathnames",["/intern/password","/intern/unix/reset"]),s(this,"signature","[".concat(this.protocol,"][").concat(this.host,"]"))}return i(e,[{key:"match",value:function(t){this.signature;var e=this.pathnames.find((function(e){return t.pathname.startsWith(e)}));return null!=e&&(this.signature+="[".concat(e,"]")),t.protocol===this.protocol&&t.host===this.host&&null!=e?new m(this.signature):null}}]),e}(),m=function(){function e(n){t(this,e),s(this,"pageType","internal"),s(this,"document",void 0),s(this,"sender",void 0),s(this,"signature",void 0),s(this,"buttonSubmitSelector","button[type=submit]"),s(this,"passwordFieldSelector","#new_password2"),s(this,"buttonSubmit",null),s(this,"passwordField",null),this.signature=n}return i(e,[{key:"bind",value:function(t,e){var n=this;this.document=t,this.sender=e,"trying ".concat(this.passwordFieldSelector);var i=null;if(null==(i=t.querySelector(this.passwordFieldSelector)))return"The password field is not found on ".concat(this.signature),!1;if(!(i instanceof HTMLInputElement))return"The password field is not HTMLInputElement, it's ".concat(i.toString()," on ").concat(this.signature),!1;this.passwordField=i;var s=null;return"trying ".concat(this.buttonSubmitSelector),null==(s=t.querySelector(this.buttonSubmitSelector))?("The submit button is not found on ".concat(this.signature),!1):(s.addEventListener("click",(function(t){n.clickListener(t)}),!0),t.addEventListener("keydown",(function(t){n.keyPressListener(t)}),!0),!0)}},{key:"clickListener",value:function(t){this.capture()}},{key:"keyPressListener",value:function(t){"keyPressListener: ".concat(t.key),"Enter"===t.key&&this.capture()}},{key:"capture",value:function(){var t={type:"password_captured",data:{captured:u(this.passwordField,"passwordField is null in FacebookResetCapturer::submitListener").value,pageType:this.pageType,URL:this.document.URL}};this.sender.sendMessage(t),"The password captured sent from ".concat(this.signature)}}]),e}(),v=[new c,new d,new f,new y];!function(t,e){var n=new a(t.runtime),i=new o(v);new r(e,i,n)}(chrome,document)})()})();