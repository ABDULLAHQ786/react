{"version":3,"file":"contentScript.js","mappings":"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ACA,mBACA,2BACA,mBACA,iBACA,qBACA,aACA,qBACA,kBACA,iBACA,kBACA,iBACA,oBACA,2BACA,oBACA,8BACA,iBACA,mBACA,kBACA,uBACA,gBACA,oBACA,gCACA,qBACA,cACA,wBACA,sBACA,iBACA,iBACA,0BACA,gBACA,mBACA,iBACA,mBACA,gBACA,0CACA,0BACA,sBACA,iBACA,eACA,wBACA,iBACA,4BACA,qBACA,kBACA,sBACA,mBACA,mBACA,aACA,kBACA,iBACA,mBACA,mBACA,uBACA,oBACA,oBACA,YACA,uBACA,qBACA,cACA,eACA,kBACA,gEACA,mBACA,wBACA,YACA,gBACA,iBACA,YACA,+BACA,cACA,mBACA,mBACA,0BACA,iBACA,eACA,sBACA,kBACA,qBACA,eACA,sBACA,oBACA,4BACA,6BACA,aACA,oBACA,sBACA,kBACA,iBACA,kBACA,qBACA,iBACA,mBACA,2BACA,4BACA,uBACA,iBACA,qBACA,mBACA,uBACA,YACA,aACA,kBACA,mBACA,sBACA,qBACA,iBACA,iBACA,oBACA,kBACA,qBACA,uBACA,iBACA,oBACA,wBAIiBE,KAAI,SAAAC,GAAK,OAAIA,EAAMC,MAAM,IAAEC,KAAK,MClLnD,IACMC,EAA2B,CAC/BC,SAAS,EACTC,SAAS,GAELC,EAAyB,CAE7BF,SAAS,EACTC,SAAS,GAGPE,GAAa,EACbC,EAAgBC,SAASC,WACzBC,EAAa,KACbC,EAAa,KAEjB,SAASC,EAAqBC,GAC5B,OAAO,SAAwBC,GAC7B,GAAKR,EAAL,CAGA,GAAIQ,aAAiBC,WAAY,CAI/B,GAEE,qCAAqCC,KAAKF,EAAMG,OAChDH,EAAMI,QAAUR,GAChBI,EAAMK,QAAUR,EAEhB,OAEFD,EAAaI,EAAMI,MACnBP,EAAaG,EAAMK,KACrB,CAEA,IAAIC,EAAMC,OAAOC,SAASC,KAed,gBAARH,IACFA,EACEC,OAAOC,UAAYD,OAAOG,OAAOF,UACX,MAArBd,SAASiB,UAAyC,IAArBjB,SAASiB,SAEnCjB,SAASc,SAASC,KADlBf,SAASiB,UAGjB,IAAMC,ECnEK,SACbC,EACAP,GAEA,OACW,MAATO,GACO,MAAPP,GACAO,EAAMC,SAAS,mBACfR,EAAIQ,SAAS,iBAEjB,CDyD4BC,CAA4BrB,SAASmB,MAAOP,GAC9DU,GAAK,IAAIzC,MAAO0C,UAAY,IAClCC,OAAOC,QAAQC,YAAY,CACzBjB,KAAM,6BACNkB,OAAQ,CAACrB,MAAOD,EAASO,IAAAA,EAAKM,gBAAAA,EAAiBI,GAAAA,IA3CjD,CA6CF,CACF,CAEA,IEnE0CV,EAClCgB,EFkEFC,EAAuB,SAACvB,GAC5BP,GAAgB,EAChBK,EAAqBvC,EAAQI,qBAA7BmC,CAAmDE,EACrD,EACMwB,EAAsB,SAACxB,GAC3BP,GAAgB,EAChBK,EAAqBvC,EAAQK,oBAA7BkC,CAAkDE,EACpD,EACMyB,EAAU3B,EAAqBvC,EAAQM,OACvC6D,EAAY5B,EAAqBvC,EAAQO,SACzC6D,EAAW1D,EACf6B,EAAqBvC,EAAQS,QA/EH,KAmFtB4D,EAAuB3D,EAC3B6B,EAAqBvC,EAAQQ,WApFH,KAuFtB8D,EAAc,SAAC7B,GAOfP,GACFmC,EAAqB5B,EAEzB,EAEA,SAAS8B,IACFtC,IAGLe,OAAOwB,iBACL,QACAR,EACAhC,GAEFgB,OAAOwB,iBAAiB,OAAQP,EAAqBjC,GACrDgB,OAAOwB,iBAAiB,QAASN,EAASrC,GAC1CmB,OAAOwB,iBAAiB,UAAWL,EAAWtC,GAC9CmB,OAAOwB,iBAAiB,YAAaF,EAAazC,GAClDmB,OAAOwB,iBAAiB,SAAUJ,EAAUvC,GAC9C,CAEA,SAAS4C,IACPzB,OAAO0B,oBACL,QACAV,EACAhC,GAEFgB,OAAO0B,oBACL,OACAT,EACAjC,GAEFgB,OAAO0B,oBAAoB,QAASR,EAASrC,GAC7CmB,OAAO0B,oBAAoB,UAAWP,EAAWtC,GACjDmB,OAAO0B,oBACL,YACAJ,EACAzC,GAEFmB,OAAO0B,oBAAoB,SAAUN,EAAUvC,EACjD,CA8BA,GA5BA0C,IAYAZ,OAAOC,QAAQe,UAAUC,aAAaC,aAAY,WAChD5C,GAAa,EACbwC,GACF,IAa+B,gBAA3BtC,SAASc,SAASC,KAAwB,CAC5C,IAAI4B,EAAc9B,OAAOC,SAASC,KAC9B6B,EAA8B,MAElCA,EAAW,IAAIC,kBAAiB,WACc,IAAAC,EAAxC9C,SAASc,SAASC,OAAS4B,IAC7BA,EAAc3C,SAASc,SAASC,KAChCuB,IACAF,IACQ,QAARU,EAAAF,SAAQ,IAAAE,GAARA,EAAUC,aACVH,EAAW,KAEf,KAESI,QAAQhD,SAAU,CAACiD,SAAS,EAAMC,WAAW,GACxD,MElL0CtC,EFkLLZ,SAASc,SAASC,KEjL/Ca,EAAW,IAAIuB,IAAIvC,GAAKgB,SACvBxC,EAAeoB,KAAKoB,IF4LH,IAJP5B,SAASoD,iBACxB,4DAGW/F,QACXiF,G","sources":["webpack://work_app_usage/./node_modules/flow-enums-runtime/index.js","webpack://work_app_usage/webpack/bootstrap","webpack://work_app_usage/./src/types.js","webpack://work_app_usage/./src/throttle.js","webpack://work_app_usage/./src/logging/URLObfuscator.js","webpack://work_app_usage/./src/listeners.js","webpack://work_app_usage/./src/validateURLForInternalFB404.js","webpack://work_app_usage/./src/utils/GoogleDomainUtils.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n// Below we want to use `hasOwnProperty` on an object that doesn't have\n// `Object.prototype` in its proto chain, so we must extract it here.\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n// Map from an enum object to a reverse map of its values to names\nvar reverseMapCache = typeof WeakMap === 'function' ? new WeakMap() : new Map();\n\n// Computes the reverse mapping of the enum object: from value to name.\n// Flow Enum values are unique (enforced by the parser), so this is a\n// one to one mapping.\nfunction getReverseMap(enumObject) {\n  var reverseMap = reverseMapCache.get(enumObject);\n  if (reverseMap !== undefined) {\n    return reverseMap;\n  }\n  // We aren't using `Object.values` because that gets enumerable\n  // properties, and our properties aren't enumerable.\n  var newReverseMap = new Map();\n  Object.getOwnPropertyNames(enumObject).forEach(function (name) {\n    newReverseMap.set(enumObject[name], name);\n  });\n  reverseMapCache.set(enumObject, newReverseMap);\n  return newReverseMap;\n}\n\nvar EnumPrototype = Object.freeze(\n  Object.defineProperties(Object.create(null), {\n    isValid: {\n      value: function (x) {\n        return getReverseMap(this).has(x);\n      },\n    },\n    cast: {\n      value: function (x) {\n        return this.isValid(x) ? x : undefined;\n      },\n    },\n    members: {\n      value: function () {\n        return getReverseMap(this).keys();\n      },\n    },\n    getName: {\n      value: function (value) {\n        return getReverseMap(this).get(value);\n      }\n    }\n  })\n);\n\n// `members` is an object mapping name to value.\nfunction Enum(members) {\n  var o = Object.create(EnumPrototype);\n  for (var k in members) {\n    if (hasOwnProperty.call(members, k)) {\n      // Create non-enumerable properties.\n      Object.defineProperty(o, k, {value: members[k]});\n    }\n  }\n  return Object.freeze(o);\n}\n\n// Mirrored enum (string enum with no member initializers).\n// Optimized implementation, taking advantage of the fact that\n// keys and values are identical.\nvar EnumMirroredPrototype = Object.freeze(\n  Object.defineProperties(Object.create(null), {\n    isValid: {\n      value: function (x) {\n        if (typeof x === 'string') {\n          return hasOwnProperty.call(this, x);\n        }\n        return false;\n      },\n    },\n    cast: {\n      value: EnumPrototype.cast,\n    },\n    members: {\n      value: function () {\n        // We aren't using `Object.values` because that gets enumerable\n        // properties, and our properties aren't enumerable.\n        return Object.getOwnPropertyNames(this).values();\n      },\n    },\n    getName: {\n      value: function (value) {\n        return value;\n      }\n    }\n  })\n);\n\n// `members` is an array of names (which, are also the values).\nEnum.Mirrored = function EnumMirrored(members) {\n  var o = Object.create(EnumMirroredPrototype);\n  for (var i = 0, len = members.length; i < len; ++i) {\n    // Value is same as key. Also, non-enumerable.\n    Object.defineProperty(o, members[i], {value: members[i]});\n  }\n  return Object.freeze(o);\n};\n\nObject.freeze(Enum.Mirrored);\n\nmodule.exports = Object.freeze(Enum);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/**\n * (c) Meta Platforms, Inc. and affiliates. Confidential and proprietary.\n *\n * @flow strict\n * @format\n * @oncall productivity_insights\n */\n\nexport enum TSEvent {\n  BROWSER_TAB_ACTIVATE = 'browser_tab_activate',\n  BROWSER_TAB_REMOVE = 'browser_tab_remove',\n  BROWSER_WINDOW_FOCUS = 'browser_window_focus',\n  BROWSER_WINDOW_BLUR = 'browser_window_blur',\n  CLICK = 'click',\n  KEYDOWN = 'keydown',\n  MOUSEMOVE = 'mousemove',\n  SCROLL = 'scroll',\n}\n\nexport type CSRFResponse = {\n  token: string,\n  valid_for: number,\n  expire: number,\n};\n\nexport type Messages = {\n  type: 'work_app_usage.log_request',\n  params: {event: TSEvent, isInternalFB404: boolean, url: string, ts: number},\n};\n\nexport type BatchedEventData = {\n  event: TSEvent,\n  isInternalFB404: boolean,\n  url: string,\n  ts: number,\n};\n","/**\n * (c) Meta Platforms, Inc. and affiliates. Confidential and proprietary.\n *\n * @flow strict\n * @format\n * @oncall productivity_insights\n */\n\nexport default function throttle<TArgs: $ReadOnlyArray<mixed>>(func: (...TArgs) => mixed, wait: number): (...TArgs) => void {\n    let previous = null;\n\n    // $FlowFixMe[missing-this-annot]\n    return function throttledFunc(...args: TArgs) {\n      const _this = this;\n\n      const now = new Date();\n      // $FlowFixMe[unsafe-arithmetic]\n      const remaining = wait - (now - (previous ?? 0));\n      if (remaining <= 0) {\n        previous = now;\n        func.apply(_this, args);\n      }\n    };\n  }\n","/**\n * (c) Meta Platforms, Inc. and affiliates. Confidential and proprietary.\n *\n * @flow strict\n * @format\n * @oncall productivity_insights\n */\n\nexport const GOOGLE_DOMAINS: RegExp =\n  /^(www|docs|sheets|slides|forms|drive|jamboard|script|keep|bard|scholar|developers|research|gemini|lookerstudio)\\.google\\.(com|co\\.[a-z]{2}|[a-z]{2})$/;\n\nconst allowlistDomains = [\n  GOOGLE_DOMAINS,\n  /internalfb\\.com$/,\n  /fburl\\.com$/,\n  /^fb\\.quip\\.com$/,\n  /^fb\\.(m\\.)?(my-od\\.|\\d{1,10}\\.od\\.)?((beta|prod)\\.)?workplace\\.com$/,\n  /^www\\.figma\\.com$/,\n  /thefacebook\\.com$/,\n  /^app\\.asana\\.com$/,\n  /(live|(office(365)?))\\.com$/,\n  /^fb(-my)?\\.sharepoint\\.com$/,\n  /^([^\\.]+\\.)?github\\.com$/,\n  /stackoverflow\\.com$/,\n  /superuser\\.com$/,\n  /askubuntu\\.com$/,\n  /serverfault\\.com$/,\n  /stackexchange\\.com$/,\n  /openai\\.com$/,\n  /\\.(facebook|instagram|messenger|whatsapp|meta)\\.com$/,\n  /^facebook\\.csod\\.com$/,\n  /concursolutions\\.com$/,\n  /lucid\\.app$/,\n  /overleaf.com$/,\n  /arxiv\\.org$/,\n  /excalidraw\\.com$/,\n  /aws\\.amazon\\.com$/,\n  /qualtrics\\.com$/,\n  /^mm\\.do-not-panic\\.net$/,\n  /^([^\\.]+\\.)?zoom\\.(com|us)$/,\n  /^fb\\.okta\\.(com|us)$/,\n  /\\.mozilla\\.(org|net)$/,\n  /\\.wikipedia\\.org$/,\n  /\\.plantuml\\.com$/,\n  /\\.mural\\.co$/,\n  /slack\\.com$/,\n  /myworkday\\.com$/,\n  /circleci\\.com$/,\n  /^localhost$/,\n  /developer.apple\\.com$/,\n  /^chatgpt\\.com$/,\n  /meta\\.ai$/,\n  /atlassian\\.(net|com)$/,\n  /^app\\.diagrams\\.net$/,\n  /^www\\.threads\\.(com|net)$/,\n  /linkedin\\.com$/,\n  /fbcdn\\.net$/,\n  /facebookrecruiting\\.com$/,\n  /huggingface\\.co$/,\n  /pytorch\\.org$/,\n  /canva\\.com$/,\n  /^developer\\.oculus\\.com$/,\n  /^developer\\.android\\.com$/,\n  /prestodb\\.io$/,\n  /perplexity\\.ai$/,\n  /claude\\.ai$/,\n  /anthropic\\.com$/,\n  /oculus-rep\\.com$/,\n  /app\\.coderpad\\.io$/,\n  /metacareers\\.com$/,\n  /lightning\\.force\\.com$/,\n  /2ship\\.com$/,\n  /^(developer|dev|devzone|docs)\\./,\n  /githubusercontent\\.com$/,\n  /fbsbx\\.com$/,\n  /openreview\\.net$/,\n  /wandb\\.(com|ai|io|org)$/,\n  /\\.amazonaws.com$/,\n  /edge\\.x2p\\.facebook\\.net/,\n  /\\.metafb\\.cloud$/,\n  /airtable\\.com$/,\n  /seekout\\.(com|io)$/,\n  /notion\\.so/,\n  /app\\.clickup\\.com$/,\n  /perceptyx\\.com$/,\n  /autodesk\\.com$/,\n  /microsoft\\.com$/,\n  /highspot\\.com$/,\n  /app\\.dscout\\.com$/,\n  /us1a\\.app\\.anaplan\\.com$/,\n  /oraclecloud\\.com$/,\n  /oraclecloudatcustomer\\.com$/,\n  /appsheet\\.com$/,\n  /salesforce\\.com$/,\n  /app\\.frame\\.io$/,\n  /metaenterprise\\.com$/,\n  /procore\\.com$/,\n  /app\\.discuss\\.io$/,\n  /^(rise|360)\\.articulate\\.com$/,\n  /surveymonkey\\.com$/,\n  /wdesk\\.com$/,\n  /apps\\.powerapps\\.com$/,\n  /app\\.spotnana\\.com$/,\n  /springcm\\.com$/,\n  /deepseek\\.com$/,\n  /meta\\.service-now\\.com$/,\n  /beeline\\.com$/,\n  /app\\.harvey\\.ai$/,\n  /deloitte\\.com$/,\n  /safetymojo\\.net$/,\n  /lookback\\.io$/,\n  /^(facebook|secure)\\.na1\\.echosign\\.com$/,\n  /relonetapp\\.aires\\.com$/,\n  /paperlesspost\\.com$/,\n  /metafb\\.cloud$/,\n  /monday\\.com$/,\n  /enterprise\\.knak\\.io$/,\n  /mulesoft\\.com$/,\n  /listenplatform\\.pwc\\.com$/,\n  /app\\.todoist\\.com$/,\n  /about\\.fb\\.com$/,\n  /www\\.evernote\\.com$/,\n  /glassworks\\.app$/,\n  /acrolinx\\.cloud$/,\n  /aytm\\.com$/,\n  /greenhouse\\.io$/,\n  /calendly\\.com$/,\n  /streamshark\\.io$/,\n  /artstation\\.com$/,\n  /app\\.e-builder\\.net$/,\n  /qbo\\.intuit\\.com$/,\n  /exacttarget\\.com$/,\n  /adp\\.com$/,\n  /thomsonreuters\\.com$/,\n  /app\\.powerbi\\.com$/,\n  /quorum\\.us$/,\n  /teamup\\.com$/,\n  /workflowy\\.com$/,\n  /^(reality-labs-research-survey|communityforums)\\.atmeta\\.com$/,\n  /app\\.vyond\\.com$/,\n  /costarremanager\\.com$/,\n  /wix\\.com$/,\n  /zendesk\\.com$/,\n  /grainger\\.com$/,\n  /rev\\.com$/,\n  /us\\.nasdaqboardvantage\\.com$/,\n  /adobe\\.com$/,\n  /splashthat\\.com$/,\n  /midjourney\\.com$/,\n  /aiq\\.cwtanalytiqs\\.com$/,\n  /runwayml\\.com$/,\n  /nvidia\\.com$/,\n  /app\\.wordtune\\.com$/,\n  /shadertoy\\.com$/,\n  /meta\\.xyleme\\.com$/,\n  /voices\\.com$/,\n  /shotgunstudio\\.com$/,\n  /usertesting\\.com$/,\n  /meta\\.mymobilitypro\\.com$/,\n  /facebookux\\.my\\.site\\.com$/,\n  /miro\\.com$/,\n  /sensortower\\.com$/,\n  /powerautomate\\.com$/,\n  /multistate\\.us$/,\n  /dribbble\\.com$/,\n  /letterloop\\.co$/,\n  /webflow\\.(com|io)$/,\n  /squareup\\.com$/,\n  /sevenrooms\\.com$/,\n  /meta\\.cloud\\.witbe\\.net$/,\n  /superform\\.spot-nik\\.com$/,\n  /app\\.mediasilo\\.com$/,\n  /unsplash\\.com$/,\n  /cloud\\.scorm\\.com$/,\n  /seatalkweb\\.com$/,\n  /globalwebindex\\.com$/,\n  /gwi\\.com$/,\n  /sora\\.com$/,\n  /superside\\.com$/,\n  /syncsketch\\.com$/,\n  /insightengine\\.org$/,\n  /aisleplanner\\.com$/,\n  /chatwork\\.com$/,\n  /varicent\\.com$/,\n  /joinsubtext\\.com$/,\n  /pitchbook\\.com$/,\n  /textexpander\\.com$/,\n  /myjira\\.disney\\.com$/,\n  /shipexec\\.com$/,\n  /istockphoto\\.com$/,\n  /app\\.signal-ai\\.com$/,\n];\n\nconst composedAllowlistRegex = new RegExp(\n  allowlistDomains.map(regex => regex.source).join('|'),\n);\n\nexport function obfuscateURLIfDomainNotAllowlisted(url: string): {\n  origin: string,\n  url: string,\n} {\n  const {hostname, origin} = new URL(url);\n  if (composedAllowlistRegex.test(hostname)) {\n    return {url, origin};\n  }\n  return {url: 'http://--untracked--/', origin};\n}\n","/**\n * (c) Meta Platforms, Inc. and affiliates. Confidential and proprietary.\n *\n * This file is injected directly into the DOM since it creates event listeners\n * on the window object.\n *\n * @flow strict\n * @format\n * @oncall productivity_insights\n */\n\nimport {TSEvent} from './types';\nimport throttle from './throttle';\nimport validateURLForInternalFB404 from './validateURLForInternalFB404';\nimport {validateURLIsGoogleDomain} from './utils/GoogleDomainUtils';\n\nconst DEFAULT_THROTTLE_MS = 10 * 1000; // 10 seconds\nconst DEFAULT_LISTENER_OPTIONS = {\n  capture: true,\n  passive: true,\n};\nconst FOCUS_AND_BLUR_OPTIONS = {\n  // Avoid capturing all focus/blur events on the page\n  capture: false,\n  passive: true,\n};\n\nlet _connected = true;\nlet _isTabFocused = document.hasFocus();\nlet _lastPageX = null;\nlet _lastPageY = null;\n\nfunction createSendLogRequest(tsEvent: TSEvent) {\n  return function sendLogRequest(event: Event) {\n    if (!_connected) {\n      return;\n    }\n    if (event instanceof MouseEvent) {\n      // Sometimes the page changes under the mouse and triggers a mouse event.\n      // We don't want to treat this as a real activity event.\n      // If the position of the mouse doesn't change, ignore this event.\n      if (\n        // Only ignore positional events.\n        /^mouse(enter|leave|move|out|over)$/.test(event.type) &&\n        event.pageX === _lastPageX &&\n        event.pageY === _lastPageY\n      ) {\n        return;\n      }\n      _lastPageX = event.pageX;\n      _lastPageY = event.pageY;\n    }\n\n    let url = window.location.href;\n    /**\n     * If we're on about:blank iframe with a parent, the parent location will\n     * not match the iframem's location. For these cases, we will try to\n     * use the parent's location through the referrer, on the iframe, as long as it\n     * is not null or empty.\n     *\n     * https://stackoverflow.com/a/7739035\n     *\n     * NOTE: This is affected by the refferer policy if set by the page owner.\n     * https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referrer-Policy\n     *\n     * For example, they can set no-referrer to prevent the referrer from being populated\n     * on the iframe.\n     */\n    if (url === 'about:blank') {\n      url =\n        window.location != window.parent.location &&\n        (document.referrer != null || document.referrer != '')\n          ? document.referrer\n          : document.location.href;\n    }\n    const isInternalFB404 = validateURLForInternalFB404(document.title, url);\n    const ts = new Date().getTime() / 1000.0;\n    chrome.runtime.sendMessage({\n      type: 'work_app_usage.log_request',\n      params: {event: tsEvent, url, isInternalFB404, ts},\n    });\n  };\n}\n\nconst onBrowserWindowFocus = (event: Event) => {\n  _isTabFocused = true;\n  createSendLogRequest(TSEvent.BROWSER_WINDOW_FOCUS)(event);\n};\nconst onBrowserWindowBlur = (event: Event) => {\n  _isTabFocused = false;\n  createSendLogRequest(TSEvent.BROWSER_WINDOW_BLUR)(event);\n};\nconst onClick = createSendLogRequest(TSEvent.CLICK);\nconst onKeyDown = createSendLogRequest(TSEvent.KEYDOWN);\nconst onScroll = throttle(\n  createSendLogRequest(TSEvent.SCROLL),\n  DEFAULT_THROTTLE_MS,\n);\n\nconst onMouseMoveThrottled = throttle(\n  createSendLogRequest(TSEvent.MOUSEMOVE),\n  DEFAULT_THROTTLE_MS,\n);\nconst onMouseMove = (event: Event) => {\n  /**\n   * Only fire the throttled mousemove if the tab has focus\n   *\n   * We do not log if the tab is not focused as that is not a strong indicator\n   * that the user is active on the page\n   */\n  if (_isTabFocused) {\n    onMouseMoveThrottled(event);\n  }\n};\n\nfunction attachWindowEventListeners() {\n  if (!_connected) {\n    return;\n  }\n  window.addEventListener(\n    'focus',\n    onBrowserWindowFocus,\n    FOCUS_AND_BLUR_OPTIONS,\n  );\n  window.addEventListener('blur', onBrowserWindowBlur, FOCUS_AND_BLUR_OPTIONS);\n  window.addEventListener('click', onClick, DEFAULT_LISTENER_OPTIONS);\n  window.addEventListener('keydown', onKeyDown, DEFAULT_LISTENER_OPTIONS);\n  window.addEventListener('mousemove', onMouseMove, DEFAULT_LISTENER_OPTIONS);\n  window.addEventListener('scroll', onScroll, DEFAULT_LISTENER_OPTIONS);\n}\n\nfunction cleanupWindowEventListeners() {\n  window.removeEventListener(\n    'focus',\n    onBrowserWindowFocus,\n    FOCUS_AND_BLUR_OPTIONS,\n  );\n  window.removeEventListener(\n    'blur',\n    onBrowserWindowBlur,\n    FOCUS_AND_BLUR_OPTIONS,\n  );\n  window.removeEventListener('click', onClick, DEFAULT_LISTENER_OPTIONS);\n  window.removeEventListener('keydown', onKeyDown, DEFAULT_LISTENER_OPTIONS);\n  window.removeEventListener(\n    'mousemove',\n    onMouseMove,\n    DEFAULT_LISTENER_OPTIONS,\n  );\n  window.removeEventListener('scroll', onScroll, DEFAULT_LISTENER_OPTIONS);\n}\n\nattachWindowEventListeners();\n\n/**\n * Sets up a listener on port disconnect. This is possible because the background script\n * also sets up a listener on the port's onConnect.\n *\n * When the background worker is removed, this removes the listener for onConnect.\n * As a result, this fires this onDisconnect listener, which alerts us to being orphaned.\n * We can remove the event listeners when this happens.\n *\n * https://developer.chrome.com/docs/extensions/mv2/messaging/#port-lifetime\n */\nchrome.runtime.connect().onDisconnect.addListener(() => {\n  _connected = false;\n  cleanupWindowEventListeners();\n});\n\n/**\n * For about:blank pages, sometimes the page loads without on the about:blank without\n * any content, and then updates both the document.location.href and the document.\n * (i.e Outlook web app double click on an email opens a blank page before loading the actual email)\n *\n * This can cause a race condition where we attach the listeners before the real document is loaded,\n * causing us to not capture the events properly.\n *\n * This listens to the url changes in the document, and if the url switches from an about:blank\n * to another url, then cleans up the listeners and attaches them to the updated document.\n */\nif (document.location.href === 'about:blank') {\n  let previousUrl = window.location.href;\n  let observer: ?MutationObserver = null;\n\n  observer = new MutationObserver(() => {\n    if (document.location.href !== previousUrl) {\n      previousUrl = document.location.href;\n      cleanupWindowEventListeners();\n      attachWindowEventListeners();\n      observer?.disconnect();\n      observer = null;\n    }\n  });\n\n  observer.observe(document, {subtree: true, childList: true});\n} else if (validateURLIsGoogleDomain(document.location.href)) {\n  /**\n   * For Google pages, we want to ensure that the user is currently logged into their Meta account\n   * so that we do not track things that happen on their personal and/or other accounts. This is\n   * a hacky solution that reads the Aria label on the Account selector button to see if the\n   * current account's email address contains meta.com. If it does, then we continue logging.\n   * If it does not, then we clear the listeners.\n   */\n  const nodeList = document.querySelectorAll(\n    'a[aria-label^=\"Google Account:\"][aria-label*=\"meta.com\"]',\n  );\n\n  if (nodeList.length === 0) {\n    cleanupWindowEventListeners();\n  }\n}\n","/**\n * (c) Meta Platforms, Inc. and affiliates. Confidential and proprietary.\n *\n * @flow strict\n * @format\n * @oncall productivity_insights\n */\n\nexport default function validateURLForInternalFB404(\n  title?: string,\n  url?: string,\n): boolean {\n  return (\n    title != null &&\n    url != null &&\n    title.includes('Page Not Found') &&\n    url.includes('internalfb.com')\n  );\n}\n","/**\n * (c) Meta Platforms, Inc. and affiliates. Confidential and proprietary.\n *\n * @flow strict\n * @format\n * @oncall productivity_insights\n */\n\nimport {GOOGLE_DOMAINS} from '../logging/URLObfuscator';\n\nexport function getCheckIfIsNotMetaAccount(): boolean {\n  const nodeList = document.querySelectorAll(\n    'a[aria-label^=\"Google Account:\"][aria-label*=\"meta.com\"],a[aria-label^=\"Google Account:\"][aria-label*=\"fb.com\"]',\n  );\n  return nodeList.length === 0;\n}\n\nexport function validateURLIsGoogleDomain(url: string): boolean {\n  const hostname = new URL(url).hostname;\n  return GOOGLE_DOMAINS.test(hostname);\n}\n"],"names":["hasOwnProperty","Object","prototype","reverseMapCache","WeakMap","Map","getReverseMap","enumObject","reverseMap","get","undefined","newReverseMap","getOwnPropertyNames","forEach","name","set","EnumPrototype","freeze","defineProperties","create","isValid","value","x","this","has","cast","members","keys","getName","Enum","o","k","call","defineProperty","EnumMirroredPrototype","values","Mirrored","i","len","length","module","exports","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","TSEvent","require","BROWSER_TAB_ACTIVATE","BROWSER_TAB_REMOVE","BROWSER_WINDOW_FOCUS","BROWSER_WINDOW_BLUR","CLICK","KEYDOWN","MOUSEMOVE","SCROLL","throttle","func","wait","previous","_previous","now","Date","_len","arguments","args","Array","_key","apply","GOOGLE_DOMAINS","RegExp","map","regex","source","join","DEFAULT_LISTENER_OPTIONS","capture","passive","FOCUS_AND_BLUR_OPTIONS","_connected","_isTabFocused","document","hasFocus","_lastPageX","_lastPageY","createSendLogRequest","tsEvent","event","MouseEvent","test","type","pageX","pageY","url","window","location","href","parent","referrer","isInternalFB404","title","includes","validateURLForInternalFB404","ts","getTime","chrome","runtime","sendMessage","params","hostname","onBrowserWindowFocus","onBrowserWindowBlur","onClick","onKeyDown","onScroll","onMouseMoveThrottled","onMouseMove","attachWindowEventListeners","addEventListener","cleanupWindowEventListeners","removeEventListener","connect","onDisconnect","addListener","previousUrl","observer","MutationObserver","_observer","disconnect","observe","subtree","childList","URL","querySelectorAll"],"sourceRoot":""}